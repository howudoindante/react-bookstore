(this["webpackJsonpreact-redux-bookstore"]=this["webpackJsonpreact-redux-bookstore"]||[]).push([[0],{183:function(e,t,n){},300:function(e,t,n){"use strict";n.r(t);var c={};n.r(c),n.d(c,"setBooks",(function(){return d}));var r={};n.r(r),n.d(r,"addBook",(function(){return b})),n.d(r,"removeBook",(function(){return l}));var a={};n.r(a),n.d(a,"changeFilterState",(function(){return J})),n.d(a,"searchBook",(function(){return V}));var o=n(0),i=n.n(o),s=n(32),j=n.n(s),u=(n(183),n(10)),d=function(e){return{type:"SET_BOOK",payload:e}},b=function(e){return{type:"ADD_BOOK_TO_CART",payload:e}},l=function(e){return{type:"REMOVE_BOOK_FROM_CART",payload:e}},O=n(27),h=n(21),m=n(81),x=n(82),p=n(109),f=n(103),g=n(314),v=n(52),y=n.p+"static/media/logo.5795afdf.png",k=n(169),C=n(315),_=n(316),B=n(72),R=n(301),w=n(4);var I=function(e){var t=i.a.useState(!1),n=Object(k.a)(t,2),c=n[0],r=n[1];return Object(w.jsxs)(C.a,{open:c,onClose:function(){return r(!1)},onOpen:function(){return r(!0)},trigger:e.children,children:[Object(w.jsx)(C.a.Header,{children:"Your cart"}),Object(w.jsx)(C.a.Content,{image:!0,children:Object(w.jsx)(C.a.Description,{children:Object(w.jsx)(_.a.Group,{children:e.items.map((function(t){return Object(w.jsxs)(_.a,{children:[Object(w.jsx)(_.a.Image,{size:"tiny",src:t.image}),Object(w.jsxs)(_.a.Content,{children:[Object(w.jsx)(_.a.Header,{as:"a",children:t.title}),Object(w.jsx)(_.a.Meta,{children:t.author}),Object(w.jsx)(_.a.Description,{children:Object(w.jsxs)(B.a,{children:[Object(w.jsx)(v.a,{name:"cart"})," In a cart"]})}),Object(w.jsxs)(_.a.Extra,{children:[Object(w.jsx)(v.a,{name:"ruble"},Math.floor((t.id+1)*Math.random()*100)),t.price]})]}),Object(w.jsxs)(_.a.Extra,{children:[Object(w.jsxs)(R.a,{onClick:function(){return e.addBook(t)},basic:!0,color:"orange",floated:"right",children:[Object(w.jsx)(v.a,{name:"plus"}),"Add more"]}),Object(w.jsxs)(R.a,{onClick:function(){return e.removeBook(t.id)},basic:!0,color:"red",floated:"right",children:[Object(w.jsx)(v.a,{name:"minus"}),"Remove all"]})]})]},Math.floor((t.id+1)*Math.random()*100))}))})})}),Object(w.jsx)(C.a.Actions,{children:Object(w.jsxs)(R.a,{basic:!0,color:"green",onClick:function(){return r(!1)},children:["Confirm and buy (",e.total," ",Object(w.jsx)(v.a,{name:"ruble",size:"small"},2),") ",Object(w.jsx)(v.a,{name:"right chevron"})]})})]})},E=function(e){var t=e.cart,n=e.total,c=e.addBook,r=e.removeBook;return Object(w.jsxs)(g.a,{children:[Object(w.jsx)(g.a.Item,{name:"logo",children:Object(w.jsx)("img",{src:y,alt:"logo"})}),Object(w.jsxs)(g.a.Menu,{position:"right",children:[Object(w.jsx)(I,{removeBook:r,addBook:c,total:n,items:t,children:Object(w.jsx)(g.a.Item,{name:"cart",children:"Cart"})}),Object(w.jsxs)(g.a.Item,{name:"cart",children:["Total: \xa0 ",Object(w.jsx)("b",{style:{fontSize:25},children:n}),"  \xa0",Object(w.jsx)(v.a,{name:"ruble"},1)]})]})]})},S=n(164),A=n.n(S),M=Object(O.b)((function(e){var t,n=e.cart;return{cart:A()(n.items,(function(e){return e.id})),total:(t=n.items,t.reduce((function(e,t){return e+t.price}),0))}}),(function(e){return Object(u.a)({},Object(h.b)(r,e))}))(E),N=n(317),T=n(167),D=n(320),H=function(e){Object(p.a)(n,e);var t=Object(f.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"render",value:function(){return Object(w.jsx)("div",{children:Object(w.jsxs)(R.a,{basic:!0,color:"orange",fluid:!0,animated:"fade",onClick:this.props.onButtonClick,children:[Object(w.jsxs)(R.a.Content,{hidden:!0,children:[Object(w.jsx)(v.a,{name:"plus"},1)," ".concat(this.props.countOfSameBooks>0?"In cart "+this.props.countOfSameBooks:"Add")]}),Object(w.jsxs)(R.a.Content,{visible:!0,children:[Object(w.jsx)(v.a,{name:"shop"},2),"Move to cart"]})]})})}}]),n}(o.Component),F=function(e){var t=e.image,n=e.title,c=e.author,r=e.price,a=e.rating,o=e.addBook,i=e.countOfSameBooks;return Object(w.jsxs)(N.a,{centered:!0,children:[Object(w.jsx)(T.a,{src:t,wrapped:!0,ui:!1}),Object(w.jsxs)(N.a.Content,{children:[Object(w.jsx)(N.a.Header,{children:n}),Object(w.jsx)(N.a.Meta,{children:Object(w.jsx)("span",{className:"date",children:c})}),Object(w.jsxs)(N.a.Description,{children:[Object(w.jsx)(v.a,{name:"ruble"},1),r]})]},1),Object(w.jsx)(N.a.Content,{extra:!0,children:Object(w.jsx)(H,{onButtonClick:o.bind(undefined,e),countOfSameBooks:i})},2),Object(w.jsx)(N.a.Content,{extra:!0,children:a?Object(w.jsx)(D.a,{icon:"star",defaultRating:a,maxRating:5,size:"large"}):[Object(w.jsx)(v.a,{className:"frown outline icon"},3),Object(w.jsx)("b",{children:"\u0411\u0443\u0434\u044c\u0442\u0435 \u043f\u0435\u0440\u0432\u044b\u043c!"},1)]},3)]})},K=Object(O.b)((function(e,t){var n=e.cart,c=t.id;return{countOfSameBooks:n.items.reduce((function(e,t){return e+(t.id===c?1:0)}),0)}}),(function(e){return Object(u.a)({},Object(h.b)(r,e))}))(F),L=n(165),P=n.n(L),z=n(313),G=n(318),J=function(e){return{type:"CHANGE_FILTER",payload:e}},V=function(e){return{type:"SEARCH",payload:e}},Y=n(312),W=void 0,q=function(e){var t=e.changeFilterState,n=e.filterBy,c=e.searchBook;return Object(w.jsxs)(g.a,{pointing:!0,secondary:!0,children:[Object(w.jsx)(g.a.Item,{children:"Sort by:"}),Object(w.jsxs)(g.a.Item,{active:"no_sorting"===n,onClick:t.bind(W,"no_sorting"),children:[" No sorting ",Object(w.jsx)(v.a,{className:"times"})]}),Object(w.jsxs)(g.a.Item,{active:"name_up"===n,onClick:t.bind(W,"name_up"),children:[" Name ",Object(w.jsx)(v.a,{className:"sort alphabet up"})]}),Object(w.jsxs)(g.a.Item,{active:"author_up"===n,onClick:t.bind(W,"author_up"),children:[" Author ",Object(w.jsx)(v.a,{className:"sort alphabet up"})]}),Object(w.jsxs)(g.a.Item,{active:"price_up"===n,onClick:t.bind(W,"price_up"),children:[" Price ",Object(w.jsx)(v.a,{className:"sort numeric up"})]}),Object(w.jsxs)(g.a.Item,{active:"price_down"===n,onClick:t.bind(W,"price_down"),children:[" Price ",Object(w.jsx)(v.a,{className:"sort numeric down"})]}),Object(w.jsxs)(g.a.Item,{active:"rating_down"===n,onClick:t.bind(W,"rating_down"),children:[" Rating ",Object(w.jsx)(v.a,{className:"sort numeric down"})]}),Object(w.jsx)(g.a.Item,{children:Object(w.jsx)(Y.a,{onChange:function(e){return c(e.target.value,c)},icon:"search"})})]})},Q=Object(O.b)((function(e){return{filterBy:e.filter.filterBy}}),(function(e){return Object(u.a)({},Object(h.b)(a,e))}))(q),U=function(e){Object(p.a)(n,e);var t=Object(f.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.setBooks;P.a.get("https://github.com/marcusblanco/react-bookstore/blob/gh-pages/books.json").then((function(t){e(t.data)}))}},{key:"render",value:function(){var e=this.props,t=e.books,n=e.isReady,c=e.cartItem;return Object(w.jsxs)(z.a,{children:[Object(w.jsx)(M,Object(u.a)(Object(u.a)({},t),c)),Object(w.jsx)(Q,{}),Object(w.jsx)(N.a.Group,{itemsPerRow:5,children:n?t.map((function(e){return Object(w.jsx)(K,Object(u.a)({},e),e.id)})):Object(w.jsxs)(G.a,{style:{margin:"30px auto",width:"60%"},icon:!0,children:[Object(w.jsx)(v.a,{name:"circle notched",loading:!0}),Object(w.jsxs)(G.a.Content,{children:[Object(w.jsx)(G.a.Header,{children:"Just one second"}),"We are collecting that content for you."]})]})})]})}}]),n}(o.Component),X=n(64),Z=n.n(X),$=function(e,t){switch(t){case"no_sorting":return e;case"name_up":return Z()(e,"title","asc");case"author_up":return Z()(e,"author","asc");case"price_up":return Z()(e,"price","asc");case"price_down":return Z()(e,"price","desc");case"rating_down":return Z()(e,"rating","desc");default:return e}},ee=function(e,t){return e?e.filter((function(e){return e.title.toLowerCase().indexOf(t.toLowerCase())>=0||e.author.toLowerCase().indexOf(t.toLowerCase())>=0})):e},te=Object(O.b)((function(e){var t=e.books,n=e.cart,c=e.filter;return{books:$(ee(t.items,c.searchParam),c.filterBy),isReady:t.isReady,cartItem:n.items}}),(function(e){return Object(u.a)({},Object(h.b)(c,e))}))(U),ne=n(166),ce=n.n(ne),re={items:null,isReady:!1},ae="SET_BOOK",oe="SET_IS_READY",ie=n(168),se={items:[]},je="ADD_BOOK_TO_CART",ue="REMOVE_BOOK_FROM_CART",de="CHANGE_FILTER",be="SEARCH",le={filterBy:"no_sorting",searchParam:""},Oe=Object(h.c)({books:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ae:return Object(u.a)(Object(u.a)({},e),{},{items:t.payload,isReady:!0});case oe:return Object(u.a)(Object(u.a)({},e),{},{isReady:t.payload});default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case je:return Object(u.a)(Object(u.a)({},e),{},{items:[].concat(Object(ie.a)(e.items),[t.payload])});case ue:return Object(u.a)(Object(u.a)({},e),{},{items:e.items.filter((function(e){return e.id!==t.payload}))});default:return e}},filter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case be:return Object(u.a)(Object(u.a)({},e),{},{searchParam:t.payload});case de:return Object(u.a)(Object(u.a)({},e),{},{filterBy:t.payload});default:return e}}}),he=(n(299),Object(h.d)(Oe,Object(h.a)(ce.a)));j.a.render(Object(w.jsx)(O.a,{store:he,children:Object(w.jsx)(te,{})}),document.getElementById("root"))}},[[300,1,2]]]);
//# sourceMappingURL=main.b02ee161.chunk.js.map